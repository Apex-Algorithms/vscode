<!-- Copyright (C) Microsoft Corporation. All rights reserved. -->
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<title>GitHub Authentication - Sign In</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" media="screen" href="auth.css" />
</head>

<body>
	<a class="branding" href="https://code.visualstudio.com/">
		Visual Studio Code
	</a>
	<div class="message-container">
		<div class="message">
			<div class="success-title">You are signed in!</div>
			<div class="success-subtitle">Taking you back to VS Code...</div>
		</div>
		<div class="error-message">
			An error occurred while signing in:
			<div class="error-text"></div>
		</div>
	</div>
	<script>
		var search = window.location.search;
		var error = (/[?&^]error=([^&]+)/.exec(search) || [])[1];
		if (error) {
			document.querySelector('.error-text')
				.textContent = decodeURIComponent(error);
			document.querySelector('body')
				.classList.add('error');
		} else {
			// Success case - redirect back to VS Code after a brief delay
			setTimeout(function() {
				// Try to redirect back to VS Code using the protocol scheme
				// Use a simple redirect approach that should work with most browsers
				try {
					window.location.href = 'vscode://github-authentication/success';
				} catch (e) {
					// If protocol redirect fails, update the message
					document.querySelector('.success-subtitle').textContent = 'You can close this page now.';
				}
			}, 1500); // 1.5 second delay to let user see the success message
		}
	</script>
</body>

</html>
